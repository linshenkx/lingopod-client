# LingoPod 译播客 UI设计文档

## 1. 整体设计风格

### 1.1 设计理念
- 简约现代风格
- 以内容为中心
- 重视用户体验
- 保持一致性

### 1.2 视觉规范

#### 主题风格
- 采用 Material Design 3 设计语言
- 支持亮色/暗色主题无缝切换
- iOS 风格的交互体验

#### 色彩系统
- 主色调：采用 Material Design 默认主题色
- 强调色：用于重要操作按钮和进度指示
- 文本色：
  - 主要文本：标准对比度
  - 次要文本：降低对比度
  - 辅助文本：最低对比度

#### 字体规范
- 标题文字：20px, 粗体
- 正文文字：16px, 常规
- 辅助文字：14px, 常规
- 字幕文字：20px, 1.8倍行高

#### 间距规范
- 页面边距：16px
- 组件间距：8px/16px/24px/32px 等级递进
- 内容区块：24px 水平内边距

#### 圆角规范
- 卡片圆角：8px
- 按钮圆角：8px
- 底部弹出：16px (仅上方圆角)

### 1.3 交互原则
- 即时反馈
- 流畅过渡
- 清晰层级
- 一致性操作
- 防误触设计

### 1.4 无障碍设计
- 合适的对比度
- 可调节字体大小
- 清晰的操作提示
- 支持系统深色模式

### 1.5 响应式设计
- 支持多平台适配
- 弹性布局
- 自适应界面
- 优化不同设备体验

## 2. 认证界面设计

### 2.1 登录界面 (LoginScreen)

#### 布局结构
- 顶部区域
  - 应用Logo
  - 欢迎标语
- 登录表单区域
  - 用户名输入框
    - 图标: person
    - 占位文本: "请输入用户名"
    - 验证规则: 长度≥3
  - 密码输入框
    - 图标: lock
    - 占位文本: "请输入密码"
    - 密码显示切换
  - 记住登录选项
  - 登录按钮(主要按钮)
- 底部区域
  - 注册入口按钮(文本按钮)
  - 版权信息

#### 交互设计
- 表单验证
  - 实时输入验证
  - 错误提示显示
- 登录状态
  - 加载动画
  - 成功/失败提示
- 路由跳转
  - 登录成功跳转首页
  - 点击注册跳转注册页

### 2.2 注册界面 (RegisterScreen)

#### 布局结构
- 顶部区域
  - 返回按钮
  - 页面标题
- 注册表单区域
  - 用户名输入框
    - 图标: person
    - 占位文本: "设置用户名(至少3个字符)"
    - 验证规则: 长度≥3
  - 密码输入框
    - 图标: lock
    - 占位文本: "设置密码"
    - 密码强度提示
  - 确认密码输入框
    - 图标: lock
    - 占位文本: "确认密码"
    - 密码匹配验证
  - 昵称输入框(可选)
    - 图标: badge
    - 占位文本: "设置昵称"
  - 注册按钮(主要按钮)
- 底部区域
  - 登录入口按钮(文本按钮)
  - 用户协议链接

#### 交互设计
- 表单验证
  - 用户名唯一性检查
  - 密码强度验证
  - 实时错误提示
- 注册流程
  - 提交前确认
  - 加载状态显示
  - 结果反馈提示

## 3. 组件设计规范

### 3.1 基础组件
- 按钮
  - 主要按钮：填充式
  - 次要按钮：描边式
  - 文本按钮：无边框
  
- 输入框
  - 圆角边框设计
  - 带图标提示
  - 清晰的输入状态

- 列表项
  - 统一高度
  - 清晰的分割线
  - 合理的内容层级

### 3.2 自定义组件
- 迷你播放器
  - 固定底部
  - 简洁信息展示
  - 基础控制功能

- 播放控制器
  - 突出播放/暂停按钮
  - 清晰的进度显示
  - 功能按钮合理布局

- 字幕显示
  - 中英文分区
  - 合适的行间距
  - 自动滚动对齐

## 4. 主要界面设计

### 4.1 主页 (HomeScreen)

#### 布局结构
- 顶部应用栏
  - 应用标题
  - 用户头像/登录入口
  - 设置按钮
  - 主题切换按钮
- 用户菜单(点击头像显示)
  - 用户信息卡片
    - 头像
    - 用户名
    - 昵称
  - 个人设置选项
  - 退出登录按钮
- 内容区域
  - URL输入表单
  - 搜索框
  - 播客列表
- 底部迷你播放器(可选)

#### 播客列表项设计
- 卡片式布局
- 信息展示
  - 标题(最多2行)
  - 创建时间
  - 播放状态标识
- 操作按钮
  - 播放/暂停
  - 更多选项菜单

### 4.2 播放器界面 (PlayerScreen)

#### 布局结构
- 顶部栏
  - 返回按钮
- 标题区域
  - 播客标题(最多2行)
- 字幕显示区域
  - 中文字幕
  - 英文字幕
- 控制区域
  - 进度条
  - 时间显示
  - 功能按钮组
  - 播放控制按钮组

#### 功能按钮设计
- 语言切换按钮
  - 图标: volume_up
  - 文本: 中文/English
- 字幕模式按钮
  - 图标: subtitles
  - 文本: 中英文/仅中文/仅英文
- 播放速度按钮
  - 图标: speed
  - 速度选项: 0.75x-2.0x

### 4.3 播放列表面板 (PlaylistBottomSheet)

#### 布局结构
- 顶部标题栏
  - 标题文本
  - 播放模式切换
  - 播客数量显示
- 列表区域
  - 当前播放标识
  - 播客标题
  - 删除按钮

#### 播放模式设计
- 顺序播放: repeat_one_outlined
- 列表循环: repeat
- 单曲循环: repeat_one
- 随机播放: shuffle

### 4.4 迷你播放器 (MiniPlayer)

#### 布局结构
- 进度条(细条)
- 时间显示区
  - 当前时间
  - 总时长
- 控制区域
  - 播客标题
  - 上一曲按钮
  - 播放/暂停按钮
  - 下一曲按钮
  - 播放列表按钮

## 5. 交互设计

### 5.1 播放控制
- 点击播客列表项开始播放
- 支持进度条拖动定位
- 播放/暂停无缝切换
- 语言切换保持播放位置

### 5.2 列表操作
- 支持搜索过滤
- 长按显示详细信息
- 删除确认机制
- 支持复制链接

### 5.3 动画效果
- 播放器平滑切换
- 进度条流畅过渡
- 列表面板滑动动画
- 播放状态切换动效

### 5.4 手势操作
- 向下滑动关闭播放器
- 左右滑动切换播客
- 双击快速播放/暂停
- 音量/进度手势控制

### 5.5 状态反馈
- 加载状态指示
- 操作结果提示
- 错误信息展示
- 网络状态提醒

## 6. 状态管理设计

### 6.1 核心状态
- 播放状态管理
  - 当前播放状态(播放/暂停/加载/错误)
  - 播放进度
  - 播放时长
  - 播放速度
  - 播放模式
  - 当前语言
  - 字幕模式

- 播放列表管理
  - 播客列表数据
  - 当前播放索引
  - 过滤后的列表
  - 搜索关键词

- 界面状态
  - 迷你播放器显示状态
  - 加载状态
  - 主题模式
  - 错误状态

### 6.2 状态更新机制

#### 播放状态更新
- 使用 ValueNotifier 实现响应式更新
  ```dart
  final ValueNotifier<bool> isPlayingNotifier
  final ValueNotifier<Duration> positionNotifier
  final ValueNotifier<Duration> durationNotifier
  final ValueNotifier<String> subtitleNotifier
  ```

#### 列表状态更新
- 采用 Provider 状态管理
- 支持列表过滤和搜索
- 实时更新播放状态
- 支持删除和刷新操作

### 6.3 缓存管理设计

#### 音频缓存
- 使用 CacheManager 管理音频文件
- 支持音频预加载
- 自动清理过期缓存
- 支持手动清理缓存

#### 字幕缓存
- 独立的字幕缓存管理器
- 支持中英文字幕同步
- 自动加载和解析
- 支持时间轴对齐

## 7. 性能优化设计

### 7.1 列表性能优化
- 使用 ListView.builder 实现列表懒加载
- 合理设置缓存范围
- 优化列表项重建逻辑
- 使用 const 构造器减少重建

### 7.2 播放性能优化
- 音频预加载机制
- 字幕预加载和解析
- 播放状态平滑过渡
- 进度条流畅更新

### 7.3 缓存优化
- 合理设置缓存大小
- 定期清理过期缓存
- 优先级缓存管理
- 网络状态感知

### 7.4 内存优化
- 及时释放资源
- 避免内存泄漏
- 合理使用图片缓存
- 控制并发任务数

## 8. 错误处理设计

### 8.1 网络错误
- 网络连接失败提示
- 自动重试机制
- 离线模式支持
- 错误状态恢复

### 8.2 播放错误
- 音频加载失败处理
- 字幕解析错误处理
- 播放异常恢复
- 用户友好提示

### 8.3 状态错误
- 状态同步异常处理
- 数据一致性检查
- 异常状态重置
- 错误日志记录

### 8.4 用户操作错误
- 输入验证
- 操作确认机制
- 防重复提交
- 友好的错误提示
